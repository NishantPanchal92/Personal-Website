(function(document,mixpanel){if(!mixpanel["__SV"]){var script,first_script,gen_fn,functions,i,lib_name="mixpanel";window[lib_name]=mixpanel;mixpanel["_i"]=[];mixpanel["init"]=function(token,config,name){var target=mixpanel;if(typeof name!=="undefined")target=mixpanel[name]=[];else name=lib_name;target["people"]=target["people"]||[];target["toString"]=function(no_stub){var str=lib_name;if(name!==lib_name)str+="."+name;if(!no_stub)str+=" (stub)";return str};target["people"]["toString"]=function(){return target.toString(1)+
".people (stub)"};function _set_and_defer(target,fn){var split=fn.split(".");if(split.length==2){target=target[split[0]];fn=split[1]}target[fn]=function(){target.push([fn].concat(Array.prototype.slice.call(arguments,0)))}}functions="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(i=0;i<functions.length;i++)_set_and_defer(target,
functions[i]);mixpanel["_i"].push([token,config,name])};mixpanel["__SV"]=1.2}})(document,window["mixpanel"]||[]);
(function(mixpanel){var ArrayProto=Array.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,windowConsole=window.console,navigator=window.navigator,document=window.document,userAgent=navigator.userAgent;var PRIMARY_INSTANCE_NAME="mixpanel",SET_QUEUE_KEY="__mps",SET_ONCE_QUEUE_KEY="__mpso",ADD_QUEUE_KEY="__mpa",APPEND_QUEUE_KEY="__mpap",SET_ACTION="$set",SET_ONCE_ACTION="$set_once",ADD_ACTION="$add",APPEND_ACTION="$append",PEOPLE_DISTINCT_ID_KEY=
"$people_distinct_id",ALIAS_ID_KEY="__alias",RESERVED_PROPERTIES=[SET_QUEUE_KEY,SET_ONCE_QUEUE_KEY,ADD_QUEUE_KEY,APPEND_QUEUE_KEY,PEOPLE_DISTINCT_ID_KEY,ALIAS_ID_KEY];var HTTP_PROTOCOL="https:"==document.location.protocol?"https://":"http://",SNIPPET_VERSION=mixpanel&&mixpanel["__SV"]||0,USE_XHR=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ENQUEUE_REQUESTS=!USE_XHR&&userAgent.indexOf("MSIE")==-1;var _={},DEBUG=false,DEFAULT_CONFIG={"api_host":HTTP_PROTOCOL+"api.mixpanel.com","cross_subdomain_cookie":true,
"cookie_name":"","loaded":function(){},"store_google":true,"save_referrer":true,"test":false,"verbose":false,"img":false,"track_pageview":true,"debug":false,"track_links_timeout":300,"cookie_expiration":365,"upgrade":false,"disable_cookie":false,"secure_cookie":false,"ip":true},DOM_LOADED=false;(function(){var nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,nativeIsArray=Array.isArray,breaker={};var each=_.each=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&
obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length)for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(hasOwnProperty.call(obj,key))if(iterator.call(context,obj[key],key,obj)===breaker)return};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source)if(source[prop]!==void 0)obj[prop]=source[prop]});return obj};_.isArray=nativeIsArray||function(obj){return toString.call(obj)===
"[object Array]"};_.isFunction=function(f){try{return/^\s*\bfunction\b/.test(f)}catch(x){return false}};_.isArguments=function(obj){return!!(obj&&hasOwnProperty.call(obj,"callee"))};_.toArray=function(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();if(_.isArray(iterable))return slice.call(iterable);if(_.isArguments(iterable))return slice.call(iterable);return _.values(iterable)};_.values=function(obj){var results=[];if(obj==null)return results;each(obj,function(value){results[results.length]=
value});return results};_.identity=function(value){return value};_.include=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;each(obj,function(value){if(found||(found=value===target))return breaker});return found};_.includes=function(str,needle){return str.indexOf(needle)!==-1}})();_.inherit=function(subclass,superclass){subclass.prototype=new superclass;subclass.prototype.constructor=subclass;subclass.superclass=
superclass.prototype;return subclass};_.isObject=function(obj){return obj===Object(obj)&&!_.isArray(obj)};_.isEmptyObject=function(obj){if(_.isObject(obj)){for(var key in obj)if(hasOwnProperty.call(obj,key))return false;return true}return false};_.isUndefined=function(obj){return obj===void 0};_.isString=function(obj){return toString.call(obj)=="[object String]"};_.isDate=function(obj){return toString.call(obj)=="[object Date]"};_.isNumber=function(obj){return toString.call(obj)=="[object Number]"};
_.encodeDates=function(obj){_.each(obj,function(v,k){if(_.isDate(v))obj[k]=_.formatDate(v);else if(_.isObject(v))obj[k]=_.encodeDates(v)});return obj};_.formatDate=function(d){function pad(n){return n<10?"0"+n:n}return d.getUTCFullYear()+"-"+pad(d.getUTCMonth()+1)+"-"+pad(d.getUTCDate())+"T"+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes())+":"+pad(d.getUTCSeconds())};_.strip_empty_properties=function(p){var ret={};_.each(p,function(v,k){if(_.isString(v)&&v.length>0)ret[k]=v});return ret};_.truncate=
function(obj,length){var ret;if(typeof obj==="string")ret=obj.slice(0,length);else if(_.isArray(obj)){ret=[];_.each(obj,function(val){ret.push(_.truncate(val,length))})}else if(_.isObject(obj)){ret={};_.each(obj,function(val,key){ret[key]=_.truncate(val,length)})}else ret=obj;return ret};_.JSONEncode=function(){return function(mixed_val){var indent;var value=mixed_val;var i;var quote=function(string){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
var meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'};var str=function(key,holder){var gap="";var indent="    ";var i=0;var k="";var v="";var length=0;var mind=gap;var partial=[];var value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON===
"function")value=value.toJSON(key);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}for(k in value)if(hasOwnProperty.call(value,
k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{"+partial.join(",")+""+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}};return str("",{"":value})}}();_.JSONDecode=function(){var at,ch,escapee={'"':'"',"\\":"\\","/":"/","b":"\b","f":"\f","n":"\n","r":"\r","t":"\t"},text,error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text};},next=function(c){if(c&&c!==ch)error("Expected '"+c+"' instead of '"+ch+"'");ch=text.charAt(at);at+=1;return ch},
number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9")string+=ch}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}number=+string;if(!isFinite(number))error("Bad number");else return number},string=function(){var hex,i,string="",uffff;if(ch==='"')while(next()){if(ch==='"'){next();return string}if(ch==="\\"){next();
if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex))break;uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else if(typeof escapee[ch]==="string")string+=escapee[ch];else break}else string+=ch}error("Bad string")},white=function(){while(ch&&ch<=" ")next()},word=function(){switch(ch){case "t":next("t");next("r");next("u");next("e");return true;case "f":next("f");next("a");next("l");next("s");next("e");return false;case "n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+
ch+"'")},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(Object.hasOwnProperty.call(object,key))error('Duplicate key "'+key+'"');object[key]=value();white();if(ch==="}"){next("}");return object}next(",");
white()}}error("Bad object")};value=function(){white();switch(ch){case "{":return object();case "[":return array();case '"':return string();case "-":return number();default:return ch>="0"&&ch<="9"?number():word()}};return function(source){var result;text=source;at=0;ch=" ";result=value();white();if(ch)error("Syntax error");return result}}();_.base64Encode=function(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=
[];if(!data)return data;data=_.utf8Encode(data);do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&63;h2=bits>>12&63;h3=bits>>6&63;h4=bits&63;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}while(i<data.length);enc=tmp_arr.join("");switch(data.length%3){case 1:enc=enc.slice(0,-2)+"==";break;case 2:enc=enc.slice(0,-1)+"=";break}return enc};_.utf8Encode=function(string){string=(string+"").replace(/\r\n/g,"\n").replace(/\r/g,
"\n");var utftext="",start,end;var stringl=0,n;start=end=0;stringl=string.length;for(n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128)end++;else if(c1>127&&c1<2048)enc=String.fromCharCode(c1>>6|192,c1&63|128);else enc=String.fromCharCode(c1>>12|224,c1>>6&63|128,c1&63|128);if(enc!==null){if(end>start)utftext+=string.substring(start,end);utftext+=enc;start=end=n+1}}if(end>start)utftext+=string.substring(start,string.length);return utftext};_.UUID=function(){var T=function(){var d=
1*new Date,i=0;while(d==1*new Date)i++;return d.toString(16)+i.toString(16)};var R=function(){return Math.random().toString(16).replace(".","")};var UA=function(n){var ua=userAgent,i,ch,buffer=[],ret=0;function xor(result,byte_array){var j,tmp=0;for(j=0;j<byte_array.length;j++)tmp|=buffer[j]<<j*8;return result^tmp}for(i=0;i<ua.length;i++){ch=ua.charCodeAt(i);buffer.unshift(ch&255);if(buffer.length>=4){ret=xor(ret,buffer);buffer=[]}}if(buffer.length>0)ret=xor(ret,buffer);return ret.toString(16)};return function(){var se=
(screen.height*screen.width).toString(16);return T()+"-"+R()+"-"+UA()+"-"+se+"-"+T()}}();_.isBlockedUA=function(ua){if(/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua))return true;return false};_.HTTPBuildQuery=function(formdata,arg_separator){var key,use_val,use_key,tmp_arr=[];if(typeof arg_separator==="undefined")arg_separator="&";_.each(formdata,function(val,key){use_val=encodeURIComponent(val.toString());use_key=encodeURIComponent(key);tmp_arr[tmp_arr.length]=
use_key+"="+use_val});return tmp_arr.join(arg_separator)};_.getQueryParam=function(url,param){param=param.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+param+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(url);if(results===null||results&&typeof results[1]!=="string"&&results[1].length)return"";else return decodeURIComponent(results[1]).replace(/\+/g," ")};_.cookie={get:function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=
ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return decodeURIComponent(c.substring(nameEQ.length,c.length))}return null},parse:function(name){var cookie;try{cookie=_.JSONDecode(_.cookie.get(name))||{}}catch(err){}return cookie},set:function(name,value,days,cross_subdomain,is_secure){var cdomain="",expires="",secure="";if(cross_subdomain){var matches=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),domain=matches?matches[0]:"";cdomain=domain?
"; domain=."+domain:""}if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1E3);expires="; expires="+date.toGMTString()}if(is_secure)secure="; secure";document.cookie=name+"="+encodeURIComponent(value)+expires+"; path=/"+cdomain+secure},remove:function(name,cross_subdomain){_.cookie.set(name,"",-1,cross_subdomain)}};_.register_event=function(){var register_event=function(element,type,handler,oldSchool){if(!element){console.error("No valid element provided to register_event");return}if(element.addEventListener&&
!oldSchool)element.addEventListener(type,handler,false);else{var ontype="on"+type;var old_handler=element[ontype];element[ontype]=makeHandler(element,handler,old_handler)}};function makeHandler(element,new_handler,old_handlers){var handler=function(event){event=event||fixEvent(window.event);if(!event)return undefined;var ret=true;var old_result,new_result;if(_.isFunction(old_handlers))old_result=old_handlers(event);new_result=new_handler.call(element,event);if(false===old_result||false===new_result)ret=
false;return ret};return handler}function fixEvent(event){if(event){event.preventDefault=fixEvent.preventDefault;event.stopPropagation=fixEvent.stopPropagation}return event}fixEvent.preventDefault=function(){this.returnValue=false};fixEvent.stopPropagation=function(){this.cancelBubble=true};return register_event}();_.dom_query=function(){function getAllChildren(e){return e.all?e.all:e.getElementsByTagName("*")}var bad_whitespace=/[\t\r\n]/g;function hasClass(elem,selector){var className=" "+selector+
" ";return(" "+elem.className+" ").replace(bad_whitespace," ").indexOf(className)>=0}function getElementsBySelector(selector){if(!document.getElementsByTagName)return new Array;var tokens=selector.split(" ");var token;var currentContext=new Array(document);for(var i=0;i<tokens.length;i++){token=tokens[i].replace(/^\s+/,"").replace(/\s+$/,"");if(token.indexOf("#")>-1){var bits=token.split("#");var tagName=bits[0];var id=bits[1];var element=document.getElementById(id);if(!element||tagName&&element.nodeName.toLowerCase()!=
tagName)return new Array;currentContext=new Array(element);continue}if(token.indexOf(".")>-1){var bits=token.split(".");var tagName=bits[0];var className=bits[1];if(!tagName)tagName="*";var found=new Array;var foundCount=0;for(var h=0;h<currentContext.length;h++){var elements;if(tagName=="*")elements=getAllChildren(currentContext[h]);else elements=currentContext[h].getElementsByTagName(tagName);for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=new Array;var currentContextIndex=
0;for(var k=0;k<found.length;k++)if(found[k].className&&_.isString(found[k].className)&&hasClass(found[k],className))currentContext[currentContextIndex++]=found[k];continue}if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var tagName=RegExp.$1;var attrName=RegExp.$2;var attrOperator=RegExp.$3;var attrValue=RegExp.$4;if(!tagName)tagName="*";var found=new Array;var foundCount=0;for(var h=0;h<currentContext.length;h++){var elements;if(tagName=="*")elements=getAllChildren(currentContext[h]);
else elements=currentContext[h].getElementsByTagName(tagName);for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=new Array;var currentContextIndex=0;var checkFunction;switch(attrOperator){case "=":checkFunction=function(e){return e.getAttribute(attrName)==attrValue};break;case "~":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("\\b"+attrValue+"\\b"))};break;case "|":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("^"+
attrValue+"-?"))};break;case "^":checkFunction=function(e){return e.getAttribute(attrName).indexOf(attrValue)==0};break;case "$":checkFunction=function(e){return e.getAttribute(attrName).lastIndexOf(attrValue)==e.getAttribute(attrName).length-attrValue.length};break;case "*":checkFunction=function(e){return e.getAttribute(attrName).indexOf(attrValue)>-1};break;default:checkFunction=function(e){return e.getAttribute(attrName)}}currentContext=new Array;currentContextIndex=0;for(var k=0;k<found.length;k++)if(checkFunction(found[k]))currentContext[currentContextIndex++]=
found[k];continue}tagName=token;var found=new Array;var foundCount=0;for(var h=0;h<currentContext.length;h++){var elements=currentContext[h].getElementsByTagName(tagName);for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=found}return currentContext}return getElementsBySelector}();_.info={campaignParams:function(){var campaign_keywords="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),kw="",params={};_.each(campaign_keywords,function(kwkey){kw=_.getQueryParam(document.URL,
kwkey);if(kw.length)params[kwkey]=kw});return params},searchEngine:function(referrer){if(referrer.search("https?://(.*)google.([^/?]*)")===0)return"google";else if(referrer.search("https?://(.*)bing.com")===0)return"bing";else if(referrer.search("https?://(.*)yahoo.com")===0)return"yahoo";else if(referrer.search("https?://(.*)duckduckgo.com")===0)return"duckduckgo";else return null},searchInfo:function(referrer){var search=_.info.searchEngine(referrer),param=search!="yahoo"?"q":"p",ret={};if(search!==
null){ret["$search_engine"]=search;var keyword=_.getQueryParam(referrer,param);if(keyword.length)ret["mp_keyword"]=keyword}return ret},browser:function(user_agent,vendor,opera){var vendor=vendor||"";if(opera){if(_.includes(user_agent,"Mini"))return"Opera Mini";return"Opera"}else if(/(BlackBerry|PlayBook|BB10)/i.test(user_agent))return"BlackBerry";else if(_.includes(user_agent,"FBIOS"))return"Facebook Mobile";else if(_.includes(user_agent,"Chrome"))return"Chrome";else if(_.includes(user_agent,"CriOS"))return"Chrome iOS";
else if(_.includes(vendor,"Apple")){if(_.includes(user_agent,"Mobile"))return"Mobile Safari";return"Safari"}else if(_.includes(user_agent,"Android"))return"Android Mobile";else if(_.includes(user_agent,"Konqueror"))return"Konqueror";else if(_.includes(user_agent,"Firefox"))return"Firefox";else if(_.includes(user_agent,"MSIE")||_.includes(user_agent,"Trident/"))return"Internet Explorer";else if(_.includes(user_agent,"Gecko"))return"Mozilla";else return""},os:function(){var a=userAgent;if(/Windows/i.test(a)){if(/Phone/.test(a))return"Windows Mobile";
return"Windows"}else if(/(iPhone|iPad|iPod)/.test(a))return"iOS";else if(/Android/.test(a))return"Android";else if(/(BlackBerry|PlayBook|BB10)/i.test(a))return"BlackBerry";else if(/Mac/i.test(a))return"Mac OS X";else if(/Linux/.test(a))return"Linux";else return""},device:function(user_agent){if(/iPad/.test(user_agent))return"iPad";else if(/iPod/.test(user_agent))return"iPod Touch";else if(/iPhone/.test(user_agent))return"iPhone";else if(/(BlackBerry|PlayBook|BB10)/i.test(user_agent))return"BlackBerry";
else if(/Windows Phone/i.test(user_agent))return"Windows Phone";else if(/Android/.test(user_agent))return"Android";else return""},referringDomain:function(referrer){var split=referrer.split("/");if(split.length>=3)return split[2];return""},properties:function(){return _.strip_empty_properties({"$os":_.info.os(),"$browser":_.info.browser(userAgent,navigator.vendor,window.opera),"$referrer":document.referrer,"$referring_domain":_.info.referringDomain(document.referrer),"$device":_.info.device(userAgent),
"mp_lib":"web"})},people_properties:function(){return _.strip_empty_properties({"$os":_.info.os(),"$browser":_.info.browser(userAgent,navigator.vendor,window.opera)})},pageviewInfo:function(page){return _.strip_empty_properties({"mp_page":page,"mp_referrer":document.referrer,"mp_browser":_.info.browser(userAgent,navigator.vendor,window.opera),"mp_platform":_.info.os()})}};var console={log:function(){if(DEBUG&&!_.isUndefined(windowConsole)&&windowConsole)try{windowConsole.log.apply(windowConsole,arguments)}catch(err){_.each(arguments,
function(arg){windowConsole.log(arg)})}},error:function(){if(DEBUG&&!_.isUndefined(windowConsole)&&windowConsole){var args=["Mixpanel error:"].concat(_.toArray(arguments));try{windowConsole.error.apply(windowConsole,args)}catch(err){_.each(args,function(arg){windowConsole.error(arg)})}}},critical:function(){if(!_.isUndefined(windowConsole)&&windowConsole){var args=["Mixpanel error:"].concat(_.toArray(arguments));try{windowConsole.error.apply(windowConsole,args)}catch(err){_.each(args,function(arg){windowConsole.error(arg)})}}}};
var MixpanelCookie=function(config){this["props"]={};this.campaign_params_saved=false;if(config["cookie_name"])this.name="mp_"+config["cookie_name"];else this.name="mp_"+config["token"]+"_mixpanel";this.load();this.update_config(config);this.upgrade(config);this.save()};MixpanelCookie.prototype.properties=function(){var p={};_.each(this["props"],function(v,k){if(!_.include(RESERVED_PROPERTIES,k))p[k]=v});return p};MixpanelCookie.prototype.load=function(){if(this.disabled)return;var cookie=_.cookie.parse(this.name);
if(cookie)this["props"]=_.extend({},cookie)};MixpanelCookie.prototype.upgrade=function(config){var should_upgrade=config["upgrade"],old_cookie_name,old_cookie;if(should_upgrade){old_cookie_name="mp_super_properties";if(typeof should_upgrade==="string")old_cookie_name=should_upgrade;old_cookie=_.cookie.parse(old_cookie_name);_.cookie.remove(old_cookie_name);_.cookie.remove(old_cookie_name,true);if(old_cookie)this["props"]=_.extend(this["props"],old_cookie["all"],old_cookie["events"])}if(!config["cookie_name"]&&
config["name"]!=="mixpanel"){old_cookie_name="mp_"+config["token"]+"_"+config["name"];old_cookie=_.cookie.parse(old_cookie_name);if(old_cookie){_.cookie.remove(old_cookie_name);_.cookie.remove(old_cookie_name,true);this.register_once(old_cookie)}}};MixpanelCookie.prototype.save=function(){if(this.disabled)return;_.cookie.set(this.name,_.JSONEncode(this["props"]),this.expire_days,this.cross_subdomain,this.secure)};MixpanelCookie.prototype.remove=function(){_.cookie.remove(this.name,false);_.cookie.remove(this.name,
true)};MixpanelCookie.prototype.clear=function(){this.remove();this["props"]={}};MixpanelCookie.prototype.register_once=function(props,default_value,days){if(_.isObject(props)){if(typeof default_value==="undefined")default_value="None";this.expire_days=typeof days==="undefined"?this.default_expiry:days;_.each(props,function(val,prop){if(!this["props"][prop]||this["props"][prop]===default_value)this["props"][prop]=val},this);this.save();return true}return false};MixpanelCookie.prototype.register=function(props,
days){if(_.isObject(props)){this.expire_days=typeof days==="undefined"?this.default_expiry:days;_.extend(this["props"],props);this.save();return true}return false};MixpanelCookie.prototype.unregister=function(prop){if(prop in this["props"]){delete this["props"][prop];this.save()}};MixpanelCookie.prototype.update_campaign_params=function(){if(!this.campaign_params_saved){this.register_once(_.info.campaignParams());this.campaign_params_saved=true}};MixpanelCookie.prototype.update_search_keyword=function(referrer){this.register(_.info.searchInfo(referrer))};
MixpanelCookie.prototype.update_referrer_info=function(referrer){this.register_once({"$initial_referrer":referrer||"$direct","$initial_referring_domain":_.info.referringDomain(referrer)||"$direct"},"")};MixpanelCookie.prototype.get_referrer_info=function(){return _.strip_empty_properties({"$initial_referrer":this["props"]["$initial_referrer"],"$initial_referring_domain":this["props"]["$initial_referring_domain"]})};MixpanelCookie.prototype.safe_merge=function(props){_.each(this["props"],function(val,
prop){if(!(prop in props))props[prop]=val});return props};MixpanelCookie.prototype.update_config=function(config){this.default_expiry=this.expire_days=config["cookie_expiration"];this.set_disabled(config["disable_cookie"]);this.set_cross_subdomain(config["cross_subdomain_cookie"]);this.set_secure(config["secure_cookie"])};MixpanelCookie.prototype.set_disabled=function(disabled){this.disabled=disabled;if(this.disabled)this.remove()};MixpanelCookie.prototype.set_cross_subdomain=function(cross_subdomain){if(cross_subdomain!==
this.cross_subdomain){this.cross_subdomain=cross_subdomain;this.remove();this.save()}};MixpanelCookie.prototype.get_cross_subdomain=function(){return this.cross_subdomain};MixpanelCookie.prototype.set_secure=function(secure){if(secure!==this.secure){this.secure=secure?true:false;this.remove();this.save()}};MixpanelCookie.prototype._add_to_people_queue=function(queue,data){var q_key=this._get_queue_key(queue),q_data=data[queue],set_q=this._get_or_create_queue(SET_ACTION),set_once_q=this._get_or_create_queue(SET_ONCE_ACTION),
add_q=this._get_or_create_queue(ADD_ACTION),append_q=this._get_or_create_queue(APPEND_ACTION,[]);if(q_key===SET_QUEUE_KEY){_.extend(set_q,q_data);this._pop_from_people_queue(ADD_ACTION,q_data)}else if(q_key===SET_ONCE_QUEUE_KEY)_.each(q_data,function(v,k){if(!(k in set_once_q))set_once_q[k]=v});else if(q_key===ADD_QUEUE_KEY)_.each(q_data,function(v,k){if(k in set_q)set_q[k]+=v;else{if(!(k in add_q))add_q[k]=0;add_q[k]+=v}},this);else if(q_key===APPEND_QUEUE_KEY)append_q.push(q_data);console.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):");
console.log(data);this.save()};MixpanelCookie.prototype._pop_from_people_queue=function(queue,data){var q=this._get_queue(queue);if(!_.isUndefined(q)){_.each(data,function(v,k){delete q[k]},this);this.save()}};MixpanelCookie.prototype._get_queue_key=function(queue){if(queue===SET_ACTION)return SET_QUEUE_KEY;else if(queue===SET_ONCE_ACTION)return SET_ONCE_QUEUE_KEY;else if(queue===ADD_ACTION)return ADD_QUEUE_KEY;else if(queue===APPEND_ACTION)return APPEND_QUEUE_KEY;else console.error("Invalid queue:",
queue)};MixpanelCookie.prototype._get_queue=function(queue){return this["props"][this._get_queue_key(queue)]};MixpanelCookie.prototype._get_or_create_queue=function(queue,default_val){var key=this._get_queue_key(queue),default_val=_.isUndefined(default_val)?{}:default_val;return this["props"][key]||(this["props"][key]=default_val)};var create_mplib=function(token,config,name){var instance,target=name===PRIMARY_INSTANCE_NAME?mixpanel:mixpanel[name];if(target&&!_.isArray(target)){console.error("You have already initialized "+
name);return}instance=new MixpanelLib;instance._init(token,config,name);instance["people"]=new MixpanelPeople;instance["people"]._init(instance);DEBUG=DEBUG||instance.get_config("debug");if(!_.isUndefined(target)){instance._execute_array.call(instance["people"],target["people"]);instance._execute_array(target)}return instance};var MixpanelLib=function(){};MixpanelLib.prototype.init=function(token,config,name){if(typeof name==="undefined"){console.error("You must name your new library: init(token, config, name)");
return}if(name===PRIMARY_INSTANCE_NAME){console.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var instance=create_mplib(token,config,name);mixpanel[name]=instance;instance._loaded();return instance};MixpanelLib.prototype._init=function(token,config,name){this["__loaded"]=true;this["config"]={};this.set_config(_.extend({},DEFAULT_CONFIG,config,{"name":name,"token":token,"callback_fn":(name===PRIMARY_INSTANCE_NAME?name:PRIMARY_INSTANCE_NAME+
"."+name)+"._jsc"}));this["_jsc"]=function(){};this.__dom_loaded_queue=[];this.__request_queue=[];this.__disabled_events=[];this._flags={"disable_all_events":false,"identify_called":false};this["cookie"]=new MixpanelCookie(this["config"]);this.register_once({"distinct_id":_.UUID()},"")};MixpanelLib.prototype._loaded=function(){this.get_config("loaded")(this);if(this.get_config("track_pageview"))this.track_pageview()};MixpanelLib.prototype._dom_loaded=function(){_.each(this.__dom_loaded_queue,function(item){this._track_dom.apply(this,
item)},this);_.each(this.__request_queue,function(item){this._send_request.apply(this,item)},this);delete this.__dom_loaded_queue;delete this.__request_queue};MixpanelLib.prototype._track_dom=function(DomClass,args){if(this.get_config("img")){console.error("You can't use DOM tracking functions with img = true.");return false}if(!DOM_LOADED){this.__dom_loaded_queue.push([DomClass,args]);return false}var dt=(new DomClass).init(this);return dt.track.apply(dt,args)};MixpanelLib.prototype._prepare_callback=
function(callback,data){if(_.isUndefined(callback))return null;if(USE_XHR){var callback_function=function(response){callback(response,data)};return callback_function}else{var jsc=this["_jsc"],randomized_cb=""+Math.floor(Math.random()*1E8),callback_string=this.get_config("callback_fn")+'["'+randomized_cb+'"]';jsc[randomized_cb]=function(response){delete jsc[randomized_cb];callback(response,data)};return callback_string}};MixpanelLib.prototype._send_request=function(url,data,callback){if(ENQUEUE_REQUESTS){this.__request_queue.push(arguments);
return}var verbose_mode=this.get_config("verbose");if(this.get_config("test"))data["test"]=1;if(verbose_mode)data["verbose"]=1;if(this.get_config("img"))data["img"]=1;if(!USE_XHR)if(callback)data["callback"]=callback;else if(verbose_mode||this.get_config("test"))data["callback"]="(function(){})";data["ip"]=this.get_config("ip")?1:0;data["_"]=(new Date).getTime().toString();url+="?"+_.HTTPBuildQuery(data);if("img"in data){var img=document.createElement("img");img.src=url;document.body.appendChild(img)}else if(USE_XHR){var req=
new XMLHttpRequest;req.open("GET",url,true);req.withCredentials=true;req.onreadystatechange=function(e){if(req.readyState===4)if(req.status===200){if(callback)if(verbose_mode)callback(_.JSONDecode(req.responseText));else callback(Number(req.responseText))}else{var error="Bad HTTP status: "+req.status+" "+req.statusText;console.error(error);if(callback)if(verbose_mode)callback({status:0,error:error});else callback(0)}};if(!/^zzz\-auto/.test(window.location.hostname))req.send(null)}};MixpanelLib.prototype._execute_array=
function(array){var fn_name,alias_calls=[],other_calls=[],tracking_calls=[];_.each(array,function(item){if(item){fn_name=item[0];if(typeof item==="function")item.call(this);else if(_.isArray(item)&&fn_name==="alias")alias_calls.push(item);else if(_.isArray(item)&&fn_name.indexOf("track")!=-1&&typeof this[fn_name]==="function")tracking_calls.push(item);else other_calls.push(item)}},this);var execute=function(calls,context){_.each(calls,function(item){this[item[0]].apply(this,item.slice(1))},context)};
execute(alias_calls,this);execute(other_calls,this);execute(tracking_calls,this)};MixpanelLib.prototype.push=function(item){this._execute_array([item])};MixpanelLib.prototype.disable=function(events){if(typeof events==="undefined")this._flags.disable_all_events=true;else this.__disabled_events=this.__disabled_events.concat(events)};MixpanelLib.prototype.track=function(event_name,properties,callback){if(typeof event_name==="undefined"){console.error("No event name provided to mixpanel.track");return}if(_.isBlockedUA(userAgent)||
this._flags.disable_all_events||_.include(this.__disabled_events,event_name)){if(typeof callback!=="undefined")callback(0);return}properties=properties||{};properties["token"]=properties.token||this.get_config("token");this["cookie"].update_search_keyword(document.referrer);if(this.get_config("store_google"))this["cookie"].update_campaign_params();if(this.get_config("save_referrer"))this["cookie"].update_referrer_info(document.referrer);properties=_.extend({},_.info.properties(),this["cookie"].properties(),
properties);var data={"event":event_name,"properties":properties};var truncated_data=_.truncate(data,255),json_data=_.JSONEncode(truncated_data),encoded_data=_.base64Encode(json_data);console.log("MIXPANEL REQUEST:");console.log(truncated_data);this._send_request(this.get_config("api_host")+"/track/",{"data":encoded_data},this._prepare_callback(callback,truncated_data));return truncated_data};MixpanelLib.prototype.track_pageview=function(page){if(typeof page==="undefined")page=document.location.href;
this.track("mp_page_view",_.info.pageviewInfo(page))};MixpanelLib.prototype.track_links=function(){return this._track_dom.call(this,LinkTracker,arguments)};MixpanelLib.prototype.track_forms=function(){return this._track_dom.call(this,FormTracker,arguments)};MixpanelLib.prototype.register=function(props,days){this["cookie"].register(props,days)};MixpanelLib.prototype.register_once=function(props,default_value,days){this["cookie"].register_once(props,default_value,days)};MixpanelLib.prototype.unregister=
function(property){this["cookie"].unregister(property)};MixpanelLib.prototype._register_single=function(prop,value){var props={};props[prop]=value;this.register(props)};MixpanelLib.prototype.identify=function(unique_id,_set_callback,_add_callback,_append_callback,_set_once_callback){if(unique_id!=this.get_distinct_id()&&unique_id!=this.get_property(ALIAS_ID_KEY)){this.unregister(ALIAS_ID_KEY);this._register_single("distinct_id",unique_id)}this._flags.identify_called=true;this["people"]._flush(_set_callback,
_add_callback,_append_callback,_set_once_callback)};MixpanelLib.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};MixpanelLib.prototype.alias=function(alias,original){if(alias===this.get_property(PEOPLE_DISTINCT_ID_KEY)){console.critical("Attempting to create alias for existing People user - aborting.");return-2}var _this=this;if(_.isUndefined(original))original=this.get_distinct_id();if(alias!==original){this._register_single(ALIAS_ID_KEY,alias);return this.track("$create_alias",
{"alias":alias,"distinct_id":original},function(response){_this.identify(alias)})}else{console.error("alias matches current distinct_id - skipping api call.");this.identify(alias);return-1}};MixpanelLib.prototype.name_tag=function(name_tag){this._register_single("mp_name_tag",name_tag)};MixpanelLib.prototype.set_config=function(config){if(_.isObject(config)){_.extend(this["config"],config);if(this["cookie"])this["cookie"].update_config(this["config"]);DEBUG=DEBUG||this.get_config("debug")}};MixpanelLib.prototype.get_config=
function(prop_name){return this["config"][prop_name]};MixpanelLib.prototype.get_property=function(property_name){return this["cookie"]["props"][property_name]};MixpanelLib.prototype.toString=function(){var name=this.get_config("name");if(name!==PRIMARY_INSTANCE_NAME)name=PRIMARY_INSTANCE_NAME+"."+name;return name};var MixpanelPeople=function(){};MixpanelPeople.prototype._init=function(mixpanel){this._mixpanel=mixpanel};MixpanelPeople.prototype.set=function(prop,to,callback){var data={};var $set={};
if(_.isObject(prop)){_.each(prop,function(v,k){if(k=="$distinct_id"||k=="$token")return;else $set[k]=v});callback=to}else $set[prop]=to;if(this._get_config("save_referrer"))this._mixpanel.cookie.update_referrer_info(document.referrer);$set=_.extend({},_.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),$set);data[SET_ACTION]=$set;return this._send_request(data,callback)};MixpanelPeople.prototype.set_once=function(prop,to,callback){var data={};var $set_once={};if(_.isObject(prop)){_.each(prop,
function(v,k){if(k=="$distinct_id"||k=="$token")return;else $set_once[k]=v});callback=to}else $set_once[prop]=to;data[SET_ONCE_ACTION]=$set_once;return this._send_request(data,callback)};MixpanelPeople.prototype.increment=function(prop,by,callback){var data={};var $add={};if(_.isObject(prop)){_.each(prop,function(v,k){if(k=="$distinct_id"||k=="$token")return;else if(isNaN(parseFloat(v))){console.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else $add[k]=
v});callback=by}else{if(_.isUndefined(by))by=1;$add[prop]=by}data[ADD_ACTION]=$add;return this._send_request(data,callback)};MixpanelPeople.prototype.append=function(list_name,value,callback){var data={};var $append={};if(_.isObject(list_name)){_.each(list_name,function(v,k){if(k=="$distinct_id"||k=="$token")return;else $append[k]=v});callback=value}else $append[list_name]=value;data[APPEND_ACTION]=$append;return this._send_request(data,callback)};MixpanelPeople.prototype.track_charge=function(amount,
properties,callback){if(!_.isNumber(amount)){amount=parseFloat(amount);if(isNaN(amount)){console.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}}return this.append("$transactions",_.extend({"$amount":amount},properties),callback)};MixpanelPeople.prototype.clear_charges=function(callback){return this.set("$transactions",[],callback)};MixpanelPeople.prototype.delete_user=function(){if(!this._identify_called()){console.error("mixpanel.people.delete_user() requires you to call identify() first");
return}var data={"$delete":this._mixpanel.get_distinct_id()};return this._send_request(data)};MixpanelPeople.prototype.toString=function(){return this._mixpanel.toString()+".people"};MixpanelPeople.prototype._send_request=function(data,callback){data["$token"]=this._get_config("token");data["$distinct_id"]=this._mixpanel.get_distinct_id();var date_encoded_data=_.encodeDates(data),truncated_data=_.truncate(date_encoded_data,255),json_data=_.JSONEncode(date_encoded_data),encoded_data=_.base64Encode(json_data);
if(!this._identify_called()){this._enqueue(data);if(!_.isUndefined(callback))if(this._get_config("verbose"))callback({status:-1,error:null});else callback(-1);return truncated_data}console.log("MIXPANEL PEOPLE REQUEST:");console.log(truncated_data);this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{"data":encoded_data},this._mixpanel._prepare_callback(callback,truncated_data));return truncated_data};MixpanelPeople.prototype._get_config=function(conf_var){return this._mixpanel.get_config(conf_var)};
MixpanelPeople.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===true};MixpanelPeople.prototype._enqueue=function(data){if(SET_ACTION in data)this._mixpanel.cookie._add_to_people_queue(SET_ACTION,data);else if(SET_ONCE_ACTION in data)this._mixpanel.cookie._add_to_people_queue(SET_ONCE_ACTION,data);else if(ADD_ACTION in data)this._mixpanel.cookie._add_to_people_queue(ADD_ACTION,data);else if(APPEND_ACTION in data)this._mixpanel.cookie._add_to_people_queue(APPEND_ACTION,
data);else console.error("Invalid call to _enqueue():",data)};MixpanelPeople.prototype._flush=function(_set_callback,_add_callback,_append_callback,_set_once_callback){var _this=this,$set_queue=_.extend({},this._mixpanel.cookie._get_queue(SET_ACTION)),$set_once_queue=_.extend({},this._mixpanel.cookie._get_queue(SET_ONCE_ACTION)),$add_queue=_.extend({},this._mixpanel.cookie._get_queue(ADD_ACTION)),$append_queue=this._mixpanel.cookie._get_queue(APPEND_ACTION);if(!_.isUndefined($set_queue)&&_.isObject($set_queue)&&
!_.isEmptyObject($set_queue)){_this._mixpanel.cookie._pop_from_people_queue(SET_ACTION,$set_queue);this.set($set_queue,function(response,data){if(response==0)_this._mixpanel.cookie._add_to_people_queue(SET_ACTION,$set_queue);if(!_.isUndefined(_set_callback))_set_callback(response,data)})}if(!_.isUndefined($set_once_queue)&&_.isObject($set_once_queue)&&!_.isEmptyObject($set_once_queue)){_this._mixpanel.cookie._pop_from_people_queue(SET_ONCE_ACTION,$set_once_queue);this.set_once($set_once_queue,function(response,
data){if(response==0)_this._mixpanel.cookie._add_to_people_queue(SET_ONCE_ACTION,$set_once_queue);if(!_.isUndefined(_set_once_callback))_set_once_callback(response,data)})}if(!_.isUndefined($add_queue)&&_.isObject($add_queue)&&!_.isEmptyObject($add_queue)){_this._mixpanel.cookie._pop_from_people_queue(ADD_ACTION,$add_queue);this.increment($add_queue,function(response,data){if(response==0)_this._mixpanel.cookie._add_to_people_queue(ADD_ACTION,$add_queue);if(!_.isUndefined(_add_callback))_add_callback(response,
data)})}if(!_.isUndefined($append_queue)&&_.isArray($append_queue)&&$append_queue.length){for(var i=$append_queue.length-1;i>=0;i--){var $append_item=$append_queue.pop();_this.append($append_item,function(response,data){if(response==0)_this._mixpanel.cookie._add_to_people_queue(APPEND_ACTION,$append_item);if(!_.isUndefined(_append_callback))_append_callback(response,data)})}_this._mixpanel.cookie.save()}};_["toArray"]=_.toArray;_["isObject"]=_.isObject;_["JSONEncode"]=_.JSONEncode;_["JSONDecode"]=
_.JSONDecode;_["isBlockedUA"]=_.isBlockedUA;_["isEmptyObject"]=_.isEmptyObject;_["info"]=_.info;_["info"]["device"]=_.info.device;_["info"]["browser"]=_.info.browser;MixpanelLib.prototype["init"]=MixpanelLib.prototype.init;MixpanelLib.prototype["disable"]=MixpanelLib.prototype.disable;MixpanelLib.prototype["track"]=MixpanelLib.prototype.track;MixpanelLib.prototype["track_links"]=MixpanelLib.prototype.track_links;MixpanelLib.prototype["track_forms"]=MixpanelLib.prototype.track_forms;MixpanelLib.prototype["track_pageview"]=
MixpanelLib.prototype.track_pageview;MixpanelLib.prototype["register"]=MixpanelLib.prototype.register;MixpanelLib.prototype["register_once"]=MixpanelLib.prototype.register_once;MixpanelLib.prototype["unregister"]=MixpanelLib.prototype.unregister;MixpanelLib.prototype["identify"]=MixpanelLib.prototype.identify;MixpanelLib.prototype["alias"]=MixpanelLib.prototype.alias;MixpanelLib.prototype["name_tag"]=MixpanelLib.prototype.name_tag;MixpanelLib.prototype["set_config"]=MixpanelLib.prototype.set_config;
MixpanelLib.prototype["get_config"]=MixpanelLib.prototype.get_config;MixpanelLib.prototype["get_property"]=MixpanelLib.prototype.get_property;MixpanelLib.prototype["get_distinct_id"]=MixpanelLib.prototype.get_distinct_id;MixpanelLib.prototype["toString"]=MixpanelLib.prototype.toString;MixpanelCookie.prototype["properties"]=MixpanelCookie.prototype.properties;MixpanelCookie.prototype["update_search_keyword"]=MixpanelCookie.prototype.update_search_keyword;MixpanelCookie.prototype["update_referrer_info"]=
MixpanelCookie.prototype.update_referrer_info;MixpanelCookie.prototype["get_cross_subdomain"]=MixpanelCookie.prototype.get_cross_subdomain;MixpanelCookie.prototype["clear"]=MixpanelCookie.prototype.clear;MixpanelPeople.prototype["set"]=MixpanelPeople.prototype.set;MixpanelPeople.prototype["set_once"]=MixpanelPeople.prototype.set_once;MixpanelPeople.prototype["increment"]=MixpanelPeople.prototype.increment;MixpanelPeople.prototype["append"]=MixpanelPeople.prototype.append;MixpanelPeople.prototype["track_charge"]=
MixpanelPeople.prototype.track_charge;MixpanelPeople.prototype["clear_charges"]=MixpanelPeople.prototype.clear_charges;MixpanelPeople.prototype["delete_user"]=MixpanelPeople.prototype.delete_user;MixpanelPeople.prototype["toString"]=MixpanelPeople.prototype.toString;if(_.isUndefined(mixpanel)){console.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");return}if(mixpanel["__loaded"]||mixpanel["config"]&&
mixpanel["cookie"]){console.error("Mixpanel library has already been downloaded at least once.");return}if(SNIPPET_VERSION<1.1){console.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");return}var instances={};_.each(mixpanel["_i"],function(item){var name,instance;if(item&&_.isArray(item)){name=item[item.length-1];instance=create_mplib.apply(this,item);instances[name]=instance}});var extend_mp=function(){_.each(instances,function(instance,name){if(name!==
PRIMARY_INSTANCE_NAME)mixpanel[name]=instance});mixpanel["_"]=_};mixpanel["init"]=function(token,config,name){if(name){if(!mixpanel[name]){mixpanel[name]=instances[name]=create_mplib(token,config,name);mixpanel[name]._loaded()}}else{var instance=mixpanel;if(instances[PRIMARY_INSTANCE_NAME])instance=instances[PRIMARY_INSTANCE_NAME];else if(token)instance=create_mplib(token,config,PRIMARY_INSTANCE_NAME);window[PRIMARY_INSTANCE_NAME]=mixpanel=instance;extend_mp()}};mixpanel["init"]();_.each(instances,
function(instance){instance._loaded()});function dom_loaded_handler(){if(dom_loaded_handler.done)return;dom_loaded_handler.done=true;DOM_LOADED=true;ENQUEUE_REQUESTS=false;_.each(instances,function(inst){inst._dom_loaded()})}if(document.addEventListener)if(document.readyState=="complete")dom_loaded_handler();else document.addEventListener("DOMContentLoaded",dom_loaded_handler,false);else if(document.attachEvent){document.attachEvent("onreadystatechange",dom_loaded_handler);var toplevel=false;try{toplevel=
window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel){function do_scroll_check(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(do_scroll_check,1);return}dom_loaded_handler()}do_scroll_check()}}_.register_event(window,"load",dom_loaded_handler,true)})(window["mixpanel"]);
